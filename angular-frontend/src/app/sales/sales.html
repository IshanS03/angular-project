
<main>
<h1>SALES</h1>
<!-- simple form to update a sale-->
<form id = "update">

    <h2 id = "sample">Update Sale</h2>
    <label for="idUpdate">Customer First Name</label>
    <input type="number" id="idUpdate" name="idUpdate" [(ngModel)]="idUpdate">

    <label for="updateCustomerFirstName">Customer First Name</label>
    <input type="text" id="updateCustomerFirstName" name="updateCustomerFirstName" [(ngModel)]="updateCustomerFirstName">

    <label for="updateCustomerLastName">Customer Last Name</label>
    <input type="text" id="updateCustomerLastName" name="updateCustomerLastName" [(ngModel)]="updateCustomerLastName">

    <label for="updateDate">Date</label>
    <input type="date" id="updateDate" name="updateDate" [(ngModel)]="updateDate">

    <label for="updateTotal">Total</label>
    <input type="number" id="updateTotal" name="updateTotal" [(ngModel)]="updateTotal">

    <label for="updateSalespersonId">Salesperson ID</label>
    <select id="updateSalespersonId" name="updateSalespersonId" [(ngModel)]="updateSalespersonId">
        @for(id of salespersonIds; track $index){
            <option value="{{id}}">{{id}}</option>
        }
    </select>

    <button type="button" (click)="updateSale()">Update Sale</button>
</form>

<!-- simple form to add a sale-->
<form>

    <!--
       each input is mapped to a TS variable using two-way data binding
       [(ngModel)]="variableName"
       you MUST also have a name property that matches the variable name
       changing either the input value or the TS variable changes the other

       [] to map the property value to the visual form
       () to map the changes in the form to the property value
       [()] to do both at the same time (two-way data binding)
    -->
    <h2>Create New Sale</h2>
    <label for="customerFirstName">Customer First Name</label>
    <input type="text" id="customerFirstName" name="customerFirstName" [(ngModel)]="customerFirstName">

    <label for="customerLastName">Customer Last Name</label>
    <input type="text" id="customerLastName" name="customerLastName" [(ngModel)]="customerLastName">

    <label for="date">Date</label>
    <input type="date" id="date" name="date" [(ngModel)]="date">

    <label for="total">Total</label>
    <input type="number" id="total" name="total" [(ngModel)]="total">

    <label for="salespersonId">Salesperson ID</label>
    <select id="salespersonId" name="salespersonId" [(ngModel)]="salespersonId">
        @for(id of salespersonIds; track $index){
            <option value="{{id}}">{{id}}</option>
        }
    </select>

    <button type="button" (click)="createSale()">Create Sale</button>
</form>

<!--hiding the table if there are no sales in the list-->

<table>
    <thead>
        <th>ID</th>
        <th>Customer First Name</th>
        <th>Customer Last Name</th>
        <th>Date</th>
        <th>Total</th>
        <th>Salesperson ID</th>
    </thead>

    <!-- this is property binding -->
    <tbody>
        @for(item of arrayOfSales; track $index ){
            <tr>
                <td>{{item.id}}</td>
                <!-- this displayed name uses our custome pipe  -->
                <!-- we must first import it in our ts file -->
                <td>{{item.customer_first_name | spongebob: true}}</td>
                <td>{{item.customer_last_name  | spongebob: false}}</td>
                <td>{{item.date | date: "shortDate"}}</td>
                <td>{{item.total | currency}}</td>
                <td>{{item.salesperson_id}}</td>
                <td><button type="button" (click)="deleteSale(item.id)">X</button></td>
            </tr>
        }
    </tbody>
</table>

<!-- when the button "hears" an event of type click it runs this method-->
<!-- the event only applies to a click on this specific button/element-->
<!-- This method adds a sale to the array, it does not require manual refreshing; any change to the array values updates the view automatically -->
<!--<div>
    <button type="button" (click)="addMockSale()">Add Sale</button>
</div>
-->
</main>